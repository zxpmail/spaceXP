import{r as k,a as w,b as r,o as U,c as h,w as l,d as f,e,j as x,E as q,i as D,u as m,k as N}from"./index-IC1vEKgd.js";import{u as R}from"./index-E_Ll_SfN.js";import{a as H,b as S}from"./fieldType-QH_x1Knh.js";const O={__name:"add-or-update",emits:["refreshDataList"],setup(L,{expose:n,emit:y}){const v=y,s=k(!1),_=k(),o=w({id:"",columnType:"",attrType:"",packageName:"",isList:1}),V=u=>{s.value=!0,o.id="",_.value&&_.value.resetFields(),u&&b(u)},b=u=>{H(u).then(t=>{Object.assign(o,t.data)})},C=k({columnType:[{required:!0,message:"必填项不能为空",trigger:"blur"}],attrType:[{required:!0,message:"必填项不能为空",trigger:"blur"}]}),a=()=>{_.value.validate(u=>{if(!u)return!1;S(o).then(()=>{q.success({message:"操作成功",duration:500,onClose:()=>{s.value=!1,v("refreshDataList")}})})})};return n({init:V}),(u,t)=>{const p=r("el-input"),g=r("el-form-item"),c=r("el-form"),T=r("el-button"),F=r("el-dialog");return U(),h(F,{modelValue:s.value,"onUpdate:modelValue":t[6]||(t[6]=i=>s.value=i),title:o.id?"修改":"新增","close-on-click-modal":!1},{footer:l(()=>[e(T,{onClick:t[4]||(t[4]=i=>s.value=!1)},{default:l(()=>[f("取消")]),_:1}),e(T,{type:"primary",onClick:t[5]||(t[5]=i=>a())},{default:l(()=>[f("确定")]),_:1})]),default:l(()=>[e(c,{ref_key:"dataFormRef",ref:_,model:o,rules:C.value,"label-width":"120px",onKeyup:t[3]||(t[3]=x(i=>a(),["enter"]))},{default:l(()=>[e(g,{label:"字段类型",prop:"columnType"},{default:l(()=>[e(p,{modelValue:o.columnType,"onUpdate:modelValue":t[0]||(t[0]=i=>o.columnType=i),placeholder:"字段类型"},null,8,["modelValue"])]),_:1}),e(g,{label:"属性类型",prop:"attrType"},{default:l(()=>[e(p,{modelValue:o.attrType,"onUpdate:modelValue":t[1]||(t[1]=i=>o.attrType=i),placeholder:"属性类型"},null,8,["modelValue"])]),_:1}),e(g,{label:"属性包名",prop:"packageName"},{default:l(()=>[e(p,{modelValue:o.packageName,"onUpdate:modelValue":t[2]||(t[2]=i=>o.packageName=i),placeholder:"属性包名"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}},A={__name:"index",setup(L){const n=w({dataListUrl:"/fieldType/list",deleteUrl:"/fieldType/delete",queryForm:{columnType:"",attrType:""}}),y=k(),v=C=>{y.value.init(C)},{getDataList:s,selectionChangeHandle:_,sizeChangeHandle:o,currentChangeHandle:V,deleteBatchHandle:b}=R(n);return(C,a)=>{const u=r("el-input"),t=r("el-form-item"),p=r("el-button"),g=r("el-form"),c=r("el-table-column"),T=r("el-table"),F=r("el-pagination"),i=r("el-card"),$=D("loading");return U(),h(i,null,{default:l(()=>[e(g,{inline:!0,model:n.queryForm,onKeyup:a[5]||(a[5]=x(d=>m(s)(),["enter"]))},{default:l(()=>[e(t,null,{default:l(()=>[e(t,null,{default:l(()=>[e(u,{modelValue:n.queryForm.columnType,"onUpdate:modelValue":a[0]||(a[0]=d=>n.queryForm.columnType=d),placeholder:"字段类型"},null,8,["modelValue"])]),_:1}),e(t,null,{default:l(()=>[e(u,{modelValue:n.queryForm.attrType,"onUpdate:modelValue":a[1]||(a[1]=d=>n.queryForm.attrType=d),placeholder:"属性类型"},null,8,["modelValue"])]),_:1})]),_:1}),e(t,null,{default:l(()=>[e(p,{onClick:a[2]||(a[2]=d=>m(s)())},{default:l(()=>[f("查询")]),_:1})]),_:1}),e(t,null,{default:l(()=>[e(p,{type:"primary",onClick:a[3]||(a[3]=d=>v())},{default:l(()=>[f("新增")]),_:1})]),_:1}),e(t,null,{default:l(()=>[e(p,{type:"danger",onClick:a[4]||(a[4]=d=>m(b)())},{default:l(()=>[f("删除")]),_:1})]),_:1})]),_:1},8,["model"]),N((U(),h(T,{data:n.dataList,border:"",style:{width:"100%"},onSelectionChange:m(_)},{default:l(()=>[e(c,{type:"selection","header-align":"center",align:"center",width:"50"}),e(c,{prop:"columnType",label:"字段类型","header-align":"center",align:"center"}),e(c,{prop:"attrType",label:"属性类型","header-align":"center",align:"center"}),e(c,{prop:"packageName",label:"属性包名","header-align":"center",align:"center"}),e(c,{label:"操作",fixed:"right","header-align":"center",align:"center",width:"150"},{default:l(d=>[e(p,{type:"primary",link:"",onClick:z=>v(d.row.id)},{default:l(()=>[f("编辑")]),_:2},1032,["onClick"]),e(p,{type:"primary",link:"",onClick:z=>m(b)(d.row.id)},{default:l(()=>[f("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onSelectionChange"])),[[$,n.dataListLoading]]),e(F,{"current-page":n.page,"page-sizes":n.size,"page-size":n.limit,total:n.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:m(o),onCurrentChange:m(V)},null,8,["current-page","page-sizes","page-size","total","onSizeChange","onCurrentChange"]),e(O,{ref_key:"addOrUpdateRef",ref:y,onRefreshDataList:m(s)},null,8,["onRefreshDataList"])]),_:1})}}};export{A as default};
